{"version":3,"sources":["api/Index.js","store/actions.js","components/login/ValidationSchema.js","components/login/Login.js","components/signUp/ValidationSchema.js","components/signUp/SignUp.js","components/main/Main.js","components/app/App.js","store/reducer.js","index.js"],"names":["axios","defaults","baseURL","signUp","a","username","email","password","post","user","alert","login","logInAction","type","profile","logOutAction","validationSchema","Yup","required","matches","initialValues","connect","state","actions","props","history","onSubmit","values","userLogin","push","className","htmlFor","Item","name","id","placeholder","size","suffix","MailOutlined","Password","htmlType","disabled","to","max","SignUp","UserOutlined","loading","useEffect","App","path","exact","component","Main","Login","initState","reducer","action","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.67c76ae0.chunk.js","sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://conduit.productionready.io/api/';\n\n/* запрос на регистрацию */\nexport const signUp = async ({ username, email, password }) => {\n  try {\n    await axios.post('/users', {\n      user: {\n        username,\n        email,\n        password,\n      },\n    });\n    alert('Вы успешно зарегистрированы');\n  } catch (error) {\n    alert('Такой пользователь существует');\n  }\n};\n\n/* запрос на авторизацию */\nexport const login = async ({ email, password }) => axios.post('/users/login', {\n  user: {\n    email,\n    password,\n  },\n});\n","export const logInAction = (email, password) => ({\n  type: 'LOGIN',\n  profile: { email, password },\n});\n\n/* выйти из профиля */\nexport const logOutAction = () => ({ type: 'LOGOUT' });\n","import * as Yup from 'yup';\r\n\r\nconst validationSchema = Yup.object({\r\n  email: Yup.string().email('Неккоретный email').required('Пожалуйста, введите почту'),\r\n  password: Yup.string()\r\n    .matches(\r\n      /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=(.*[a-zA-Z]){4}).{8,20}$/,\r\n      'Введите от 8 до 40 символов, как минимум одна цифра и одна заглавная буква',\r\n    )\r\n    .required('Пожалуйста, введите пароль'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Formik } from 'formik';\r\nimport { Form, Input, SubmitButton } from 'formik-antd';\r\nimport { MailOutlined } from '@ant-design/icons';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { login } from '../../api/Index';\r\nimport * as actions from '../../store/actions';\r\nimport validationSchema from './ValidationSchema';\r\n\r\n/* поля, которые отправляются на сервер */\r\nconst initialValues = {\r\n  password: '',\r\n  email: '',\r\n};\r\n\r\nconst Login = (props) => {\r\n  const { history, logInAction } = props;\r\n\r\n  const onSubmit = async (values) => {\r\n    const { email, password } = values;\r\n    const userLogin = values;\r\n    try {\r\n      await login(values);\r\n      await logInAction(email, password);\r\n      userLogin.login = true;\r\n      history.push('/');\r\n    } catch (err) {\r\n      alert('Неправильный логин или пароль');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Formik onSubmit={onSubmit} initialValues={initialValues} validationSchema={validationSchema}>\r\n      <Form className=\"form\">\r\n        <h2>Вход</h2>\r\n        <div>\r\n          <label htmlFor=\"email\">\r\n            Почта\r\n            <span className=\"required-star\"> *</span>\r\n          </label>\r\n          <Form.Item name=\"email\">\r\n            <Input\r\n              id=\"email\"\r\n              name=\"email\"\r\n              placeholder=\"my@mail.ru\"\r\n              size=\"large\"\r\n              suffix={<MailOutlined />}\r\n            />\r\n          </Form.Item>\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"password\">\r\n            Пароль\r\n            <span className=\"required-star\"> *</span>\r\n          </label>\r\n          <Form.Item name=\"password\">\r\n            <Input.Password\r\n              id=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"My-password-123\"\r\n              size=\"large\"\r\n            />\r\n          </Form.Item>\r\n        </div>\r\n        <div className=\"formButtonsContainer\">\r\n          <SubmitButton htmlType=\"submit\" disabled={false} size=\"large\" className=\"button\">\r\n            Войти\r\n          </SubmitButton>\r\n        </div>\r\n        <div className=\"linkContainer\">\r\n          <Link to=\"/signUp\">Регистрация</Link>\r\n        </div>\r\n      </Form>\r\n    </Formik>\r\n  );\r\n};\r\n\r\nLogin.propTypes = {\r\n  history: PropTypes.objectOf(\r\n    PropTypes.oneOfType([PropTypes.func, PropTypes.number, PropTypes.string, PropTypes.object]),\r\n  ).isRequired,\r\n  logInAction: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state,\r\n});\r\n\r\nexport default connect(mapStateToProps, actions)(Login);\r\n","import * as Yup from 'yup';\r\n\r\nconst validationSchema = Yup.object({\r\n  username: Yup.string()\r\n    .max(50, 'Имя должно содержать не более 50 символов')\r\n    .required('Пожалуйста, введите имя'),\r\n  password: Yup.string()\r\n    .matches(\r\n      /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=(.*[a-zA-Z]){4}).{8,20}$/,\r\n      'Введите от 8 до 40 символов, как минимум одна цифра и одна заглавная буква',\r\n    )\r\n    .required('Пожалуйста, введите пароль'),\r\n  email: Yup.string().email('Неккоретный email').required('Пожалуйста, введите почту'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\nimport { Formik } from 'formik';\nimport { Form, Input, SubmitButton } from 'formik-antd';\nimport { MailOutlined, UserOutlined } from '@ant-design/icons';\nimport { Link } from 'react-router-dom';\nimport { signUp } from '../../api/Index';\nimport validationSchema from './ValidationSchema';\n\n/* поля, которые отправляются на сервер */\nconst initialValues = {\n  username: '',\n  password: '',\n  email: '',\n};\n\nconst SignUp = () => {\n  const onSubmit = async (values) => {\n    await signUp(values);\n  };\n\n  return (\n    <Formik onSubmit={onSubmit} initialValues={initialValues} validationSchema={validationSchema}>\n      <Form className=\"form\">\n        <h2 className=\"header\">Форма регистрации</h2>\n        <div>\n          <label htmlFor=\"username\">\n            Имя\n            <span className=\"required-star\"> *</span>\n          </label>\n          <Form.Item name=\"username\">\n            <Input\n              id=\"username\"\n              name=\"username\"\n              placeholder=\"Алексей\"\n              size=\"large\"\n              suffix={<UserOutlined />}\n            />\n          </Form.Item>\n        </div>\n        <div>\n          <label htmlFor=\"email\">\n            Почта\n            <span className=\"required-star\"> *</span>\n          </label>\n          <Form.Item name=\"email\">\n            <Input\n              id=\"email\"\n              name=\"email\"\n              placeholder=\"my@mail.ru\"\n              size=\"large\"\n              suffix={<MailOutlined />}\n            />\n          </Form.Item>\n        </div>\n        <div>\n          <label htmlFor=\"password\">\n            Пароль\n            <span className=\"required-star\"> *</span>\n          </label>\n          <Form.Item name=\"password\">\n            <Input.Password\n              id=\"password\"\n              name=\"password\"\n              placeholder=\"My-password-123\"\n              size=\"large\"\n            />\n          </Form.Item>\n        </div>\n        <div className=\"formButtonsContainer\">\n          <SubmitButton loading={false} disabled={false} size=\"large\" className=\"button\">\n            Зарегистрироваться\n          </SubmitButton>\n        </div>\n        <div className=\"linkContainer\">\n          <span>Уже зарегистрировались? </span>\n          <Link to=\"/login\">Войти</Link>\n        </div>\n      </Form>\n    </Formik>\n  );\n};\n\nexport default SignUp;\n","import React, { useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Formik } from 'formik';\r\nimport { Form, SubmitButton } from 'formik-antd';\r\nimport { connect } from 'react-redux';\r\nimport * as actions from '../../store/actions';\r\n\r\n/* поля, которые отправляются на сервер */\r\nconst initialValues = {\r\n  name: '',\r\n  password: '',\r\n  email: '',\r\n};\r\n\r\nconst Main = (props) => {\r\n  const { user, history, logOutAction } = props;\r\n  useEffect(() => {\r\n    if (!user.login) {\r\n      history.push('/login');\r\n    }\r\n  });\r\n  const onSubmit = () => {\r\n    logOutAction();\r\n  };\r\n  return (\r\n    <div>\r\n      <Formik onSubmit={onSubmit} initialValues={initialValues}>\r\n        <Form className=\"form\">\r\n          <h2 className=\"header\">Привет !</h2>\r\n          <h3 className=\"header\">{user.email}</h3>\r\n          <div className=\"formButtonsContainer\">\r\n            <SubmitButton disabled={false} size=\"large\" className=\"button\">\r\n              Выход\r\n            </SubmitButton>\r\n          </div>\r\n        </Form>\r\n      </Formik>\r\n    </div>\r\n  );\r\n};\r\n\r\nMain.propTypes = {\r\n  history: PropTypes.objectOf(\r\n    PropTypes.oneOfType([PropTypes.func, PropTypes.number, PropTypes.string, PropTypes.object]),\r\n  ).isRequired,\r\n  user: PropTypes.objectOf(PropTypes.oneOfType([PropTypes.string, PropTypes.bool])).isRequired,\r\n  logOutAction: PropTypes.func.isRequired,\r\n};\r\n\r\nconst mapStateToProps = (state) => ({\r\n  user: state,\r\n});\r\n\r\nexport default connect(mapStateToProps, actions)(Main);\r\n","import React from 'react';\r\nimport { HashRouter, Route } from 'react-router-dom';\r\nimport Login from '../login/Login';\r\nimport SignUp from '../signUp/SignUp';\r\nimport Main from '../main/Main';\r\nimport './App.scss';\r\n\r\nconst App = () => (\r\n  <HashRouter>\r\n    <div className=\"App\">\r\n      <Route path=\"/\" exact component={Main} />\r\n      <Route path=\"/signUp\" component={SignUp} />\r\n      <Route path=\"/login\" component={Login} />\r\n    </div>\r\n  </HashRouter>\r\n);\r\n\r\nexport default App;\r\n","const initState = {\r\n  login: false,\r\n};\r\n\r\nconst reducer = (state = initState, action) => {\r\n  switch (action.type) {\r\n    case 'LOGIN':\r\n      return { ...state, ...action.profile, login: true };\r\n    case 'LOGOUT':\r\n      return { ...state, login: false };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'antd/dist/antd.css';\r\nimport './index.scss';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport App from './components/app/App';\r\nimport reducer from './store/reducer';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}